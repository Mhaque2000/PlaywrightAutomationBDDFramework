npm init playwright@lates
npm i -D @cucumber/cucumber
npm i -D ts-node
cucumber extension install in VS Code

create src/test/features and src/test/steps folder 

create configuration file in root,
cucumber.json ->
{
    "default":
    {
        "paths": ["./src/test/**/features"],
        "require": ["./src/test/steps/**/*.ts"],
        "requireModule": ["ts-node/register"]
    }
}

cucumber runs js file so we're giving ts-node to convert it in js

configure runner in package.json, cucumber-js test ->
  "scripts": {
    "cucumber": "cucumber-js npx"
  },

Additional configuration to be done -> 
tsconfig.json 
{
    "compilerOptions": {
        "module": "commonjs",
        "moduleResolution": "node"
    }
}

for linking the features file and step definition files add ->
  "cucumber.features": [
    "src/test/feature/*.feature",
  ],
  "cucumber.glue": [
    "src/test/steps/*.ts"
  ]

  if still not working then -> {
  "cucumberautocomplete.steps": [
    "src/test/steps/**/*.ts"
  ],
  "cucumberautocomplete.syncfeatures": true,
}

adding hooks -> cucumber.json        
"require": ["./src/test/steps/**/*.ts","./src/hooks/hooks.ts"],

cucumber HTML report -> cucumber.json
"format": ["html:test-result/report/cucumber-report.html"]
attaching screenshot ->
After(async function({pickle, result}){
    //Screenshot only for failure
    if(result?.status == Status.FAILED){
        const image = await pageFixture.page.screenshot({path: `./test-results/screenshots/${pickle.name}.png`, type:'png'})
        this.attach(image, 'image/png')
    }
    await page.close();
    await context.close();
})

multiple-cucumber-html-reporter (has much more details that simple html report)->
npm i -D multiple-cucumber-html-reporter
add in cucumber.json ->
"format": [
            "html:test-results/report/cucumber-report.html",
            "json:test-results/report_advanced/cucumber-report.json"
        ]
add reportGenerator.ts ->
const report = require('multiple-cucumber-html-reporter');
 
report.generate({
    jsonDir: './test-results/report_advanced/',
    reportPath: './test-results/report_advanced/',
    metadata:{
        browser: {
            name: 'chrome',
            version: '60'
        },
        device: 'Local test machine',
        platform: {
            name: 'ubuntu',
            version: '16.04'
        }
    }
});

github actions setting for browser reporting ->
name: Cucumber Tests

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
      # 1️⃣ Checkout repository
      - name: Checkout repository
        uses: actions/checkout@v3

      # 2️⃣ Setup Node.js
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: 20

      # 3️⃣ Install dependencies
      - name: Install dependencies
        run: npm install

      # 4️⃣ Install Playwright browsers
      - name: Install Playwright Browsers
        run: npx playwright install

      # 5️⃣ Run Cucumber tests (clean + execute + posttest)
      - name: Run Cucumber Tests
        run: npm test

      # 6️⃣ Deploy the generated HTML report to GitHub Pages
      - name: Deploy Cucumber Report to GitHub Pages
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GH_PAT }}
          publish_dir: ./test-results/report_advanced
          publish_branch: gh-pages

